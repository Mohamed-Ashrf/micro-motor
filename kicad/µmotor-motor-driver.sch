EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:texas
LIBS:interface
LIBS:contrib
LIBS:valves
LIBS:DRV8870
LIBS:INA180A
LIBS:AS5045B
LIBS:TCAN33x
LIBS:mic4606
LIBS:drv8323s
LIBS:FDMD82xx
LIBS:ncp4623
LIBS:TMP006
LIBS:stm32
LIBS:µmotor-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 6
Title "µmotor - Micro Motor Controller"
Date "2017-09-14"
Rev "rev1"
Comp "Roboterclub Aachen e.V."
Comment1 "Raphael Lehmann"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L +24V #PWR015
U 1 1 59BA7201
P 2100 2800
F 0 "#PWR015" H 2100 2650 50  0001 C CNN
F 1 "+24V" H 2100 2940 50  0000 C CNN
F 2 "" H 2100 2800 50  0001 C CNN
F 3 "" H 2100 2800 50  0001 C CNN
	1    2100 2800
	1    0    0    -1  
$EndComp
Text HLabel 4850 3900 0    60   Input ~ 0
IN_U_P
Text HLabel 4850 5300 0    60   Output ~ 0
SenseV
Text HLabel 4850 5400 0    60   Output ~ 0
SenseAll
Text HLabel 4850 4000 0    60   Input ~ 0
IN_U_N
Text HLabel 4850 4100 0    60   Input ~ 0
IN_V_P
Text HLabel 4850 4200 0    60   Input ~ 0
IN_V_N
Text HLabel 4850 4300 0    60   Input ~ 0
IN_W_P
Text HLabel 4850 4400 0    60   Input ~ 0
IN_W_N
Text HLabel 4850 5500 0    60   Input ~ 0
SenseCAL
$Comp
L DRV8323S U301
U 1 1 5A4FE001
P 5850 4100
F 0 "U301" H 5850 5450 60  0000 C CNN
F 1 "DRV8323S" H 5850 4100 60  0000 C CNN
F 2 "Housings_DFN_QFN:QFN-40-1EP_6x6mm_Pitch0.5mm" H 5850 4100 60  0001 C CNN
F 3 "" H 5850 4100 60  0001 C CNN
	1    5850 4100
	1    0    0    -1  
$EndComp
Text HLabel 4850 3800 0    60   Input ~ 0
ENABLE
$Comp
L C C304
U 1 1 5A4FE181
P 4500 3000
F 0 "C304" V 4550 3050 50  0000 L CNN
F 1 "1µ 16V X7R" V 4300 2800 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4538 2850 50  0001 C CNN
F 3 "" H 4500 3000 50  0001 C CNN
	1    4500 3000
	0    1    1    0   
$EndComp
Text Label 4800 3000 0    60   ~ 0
VCP
$Comp
L C C305
U 1 1 5A4FE29C
P 4500 3200
F 0 "C305" V 4550 3250 50  0000 L CNN
F 1 "47n 50V X7R" V 4650 3000 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4538 3050 50  0001 C CNN
F 3 "" H 4500 3200 50  0001 C CNN
	1    4500 3200
	0    1    1    0   
$EndComp
Text Label 4800 3100 0    60   ~ 0
CPH
Text Label 4800 3200 0    60   ~ 0
CPL
$Comp
L C C302
U 1 1 5A4FE3E8
P 2950 3150
F 0 "C302" H 2975 3250 50  0000 L CNN
F 1 "100n 50V" H 2975 3050 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 2988 3000 50  0001 C CNN
F 3 "" H 2950 3150 50  0001 C CNN
	1    2950 3150
	1    0    0    -1  
$EndComp
$Comp
L CP C301
U 1 1 5A4FE464
P 2300 3150
F 0 "C301" H 2325 3250 50  0000 L CNN
F 1 ">10µ 35V" H 2325 3050 50  0000 L CNN
F 2 "Capacitors_THT:CP_Radial_D4.0mm_P2.00mm" H 2338 3000 50  0001 C CNN
F 3 "" H 2300 3150 50  0001 C CNN
	1    2300 3150
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR016
U 1 1 5A4FE4D1
P 2300 3400
F 0 "#PWR016" H 2300 3150 50  0001 C CNN
F 1 "GND" H 2300 3250 50  0000 C CNN
F 2 "" H 2300 3400 50  0001 C CNN
F 3 "" H 2300 3400 50  0001 C CNN
	1    2300 3400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR017
U 1 1 5A4FE4F8
P 2950 3400
F 0 "#PWR017" H 2950 3150 50  0001 C CNN
F 1 "GND" H 2950 3250 50  0000 C CNN
F 2 "" H 2950 3400 50  0001 C CNN
F 3 "" H 2950 3400 50  0001 C CNN
	1    2950 3400
	1    0    0    -1  
$EndComp
$Comp
L C C303
U 1 1 5A4FE71A
P 4100 3650
F 0 "C303" H 4150 3550 50  0000 L CNN
F 1 "1µ 6V3 X7R" H 4150 3750 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4138 3500 50  0001 C CNN
F 3 "" H 4100 3650 50  0001 C CNN
	1    4100 3650
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR018
U 1 1 5A4FE87C
P 4100 4000
F 0 "#PWR018" H 4100 3750 50  0001 C CNN
F 1 "GND" H 4100 3850 50  0000 C CNN
F 2 "" H 4100 4000 50  0001 C CNN
F 3 "" H 4100 4000 50  0001 C CNN
	1    4100 4000
	1    0    0    -1  
$EndComp
Text HLabel 4850 4600 0    60   Input ~ 0
MOSI
Text HLabel 4050 4700 0    60   Output ~ 0
MISO
Text HLabel 4850 4800 0    60   Input ~ 0
SCK
Text HLabel 4850 4900 0    60   Input ~ 0
~CS
Text Notes 3100 4850 0    60   ~ 0
STM32 internal pull-up!
$Comp
L GND #PWR019
U 1 1 5A4FF46D
P 5850 5900
F 0 "#PWR019" H 5850 5650 50  0001 C CNN
F 1 "GND" H 5850 5750 50  0000 C CNN
F 2 "" H 5850 5900 50  0001 C CNN
F 3 "" H 5850 5900 50  0001 C CNN
	1    5850 5900
	1    0    0    -1  
$EndComp
$Comp
L FDMD82xx Q303
U 1 1 5A50285C
P 10050 2250
F 0 "Q303" H 9700 2150 50  0000 L CNN
F 1 "FDMD82xx" H 9550 2250 50  0000 L CNN
F 2 "DFN-12-2EP_3.3x5mm_Pitch0.65mm:DFN-12-2EP_3.3x5mm_Pitch0.65mm" H 10150 2300 60  0001 C CNN
F 3 "" H 10000 2400 50  0001 L CNN
	1    10050 2250
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR020
U 1 1 5A502CAF
P 10100 1650
F 0 "#PWR020" H 10100 1500 50  0001 C CNN
F 1 "+24V" H 10100 1790 50  0000 C CNN
F 2 "" H 10100 1650 50  0001 C CNN
F 3 "" H 10100 1650 50  0001 C CNN
	1    10100 1650
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR021
U 1 1 5A5036BC
P 6750 2800
F 0 "#PWR021" H 6750 2650 50  0001 C CNN
F 1 "+24V" H 6750 2940 50  0000 C CNN
F 2 "" H 6750 2800 50  0001 C CNN
F 3 "" H 6750 2800 50  0001 C CNN
	1    6750 2800
	1    0    0    -1  
$EndComp
Text HLabel 10600 2250 2    60   Output ~ 0
OUT_U
$Comp
L FDMD82xx Q301
U 1 1 5A505C4C
P 7800 4250
F 0 "Q301" H 7450 4150 50  0000 L CNN
F 1 "FDMD82xx" H 7300 4250 50  0000 L CNN
F 2 "DFN-12-2EP_3.3x5mm_Pitch0.65mm:DFN-12-2EP_3.3x5mm_Pitch0.65mm" H 7900 4300 60  0001 C CNN
F 3 "" H 7750 4400 50  0001 L CNN
	1    7800 4250
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR022
U 1 1 5A505C52
P 7850 3650
F 0 "#PWR022" H 7850 3500 50  0001 C CNN
F 1 "+24V" H 7850 3790 50  0000 C CNN
F 2 "" H 7850 3650 50  0001 C CNN
F 3 "" H 7850 3650 50  0001 C CNN
	1    7850 3650
	1    0    0    -1  
$EndComp
Text HLabel 8350 4250 2    60   Output ~ 0
OUT_W
$Comp
L FDMD82xx Q302
U 1 1 5A506004
P 8950 3300
F 0 "Q302" H 8600 3200 50  0000 L CNN
F 1 "FDMD82xx" H 8450 3300 50  0000 L CNN
F 2 "DFN-12-2EP_3.3x5mm_Pitch0.65mm:DFN-12-2EP_3.3x5mm_Pitch0.65mm" H 9050 3350 60  0001 C CNN
F 3 "" H 8900 3450 50  0001 L CNN
	1    8950 3300
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR023
U 1 1 5A50600A
P 9000 2700
F 0 "#PWR023" H 9000 2550 50  0001 C CNN
F 1 "+24V" H 9000 2840 50  0000 C CNN
F 2 "" H 9000 2700 50  0001 C CNN
F 3 "" H 9000 2700 50  0001 C CNN
	1    9000 2700
	1    0    0    -1  
$EndComp
Text HLabel 9500 3300 2    60   Output ~ 0
OUT_V
Text HLabel 6750 4700 2    60   Output ~ 0
~FAULT
$Comp
L R R302
U 1 1 5A5066D4
P 9000 5600
F 0 "R302" V 9080 5600 50  0000 C CNN
F 1 "5m" V 9000 5600 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 8930 5600 50  0001 C CNN
F 3 "" H 9000 5600 50  0001 C CNN
	1    9000 5600
	1    0    0    -1  
$EndComp
$Comp
L R R303
U 1 1 5A50692C
P 10100 6000
F 0 "R303" V 10180 6000 50  0000 C CNN
F 1 "5m" V 10100 6000 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 10030 6000 50  0001 C CNN
F 3 "" H 10100 6000 50  0001 C CNN
	1    10100 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 2900 5050 2900
Wire Wire Line
	2100 2900 2100 2800
Wire Wire Line
	4650 3000 5050 3000
Wire Wire Line
	4350 3000 4250 3000
Wire Wire Line
	4250 3000 4250 2900
Connection ~ 4250 2900
Wire Wire Line
	5050 3200 4650 3200
Wire Wire Line
	4350 3200 4250 3200
Wire Wire Line
	4250 3200 4250 3100
Wire Wire Line
	4250 3100 5050 3100
Wire Wire Line
	2950 3000 2950 2900
Connection ~ 2950 2900
Wire Wire Line
	2300 3000 2300 2900
Connection ~ 2300 2900
Wire Wire Line
	2950 3400 2950 3300
Wire Wire Line
	2300 3400 2300 3300
Wire Wire Line
	4850 3800 5050 3800
Wire Wire Line
	5050 3900 4850 3900
Wire Wire Line
	4850 4000 5050 4000
Wire Wire Line
	5050 4100 4850 4100
Wire Wire Line
	4850 4200 5050 4200
Wire Wire Line
	5050 4300 4850 4300
Wire Wire Line
	4850 4400 5050 4400
Wire Wire Line
	4100 3400 4100 3500
Wire Wire Line
	4100 3800 4100 4000
Wire Wire Line
	4100 3900 4350 3900
Wire Wire Line
	4350 3900 4350 3600
Wire Wire Line
	4350 3600 5050 3600
Connection ~ 4100 3900
Wire Wire Line
	5050 3500 4950 3500
Wire Wire Line
	4950 3500 4950 3600
Connection ~ 4950 3600
Wire Wire Line
	4350 5100 5050 5100
Wire Wire Line
	4850 5300 5050 5300
Wire Wire Line
	5050 5400 4850 5400
Wire Wire Line
	4850 5500 5050 5500
Wire Wire Line
	4050 4700 5050 4700
Wire Wire Line
	4850 4600 5050 4600
Wire Wire Line
	5050 4800 4850 4800
Wire Wire Line
	4850 4900 5050 4900
Wire Wire Line
	5850 5900 5850 5800
Wire Wire Line
	10400 2050 10500 2050
Wire Wire Line
	10500 2450 10400 2450
Wire Wire Line
	10400 2350 10500 2350
Connection ~ 10500 2350
Connection ~ 10500 2250
Wire Wire Line
	10400 2150 10500 2150
Connection ~ 10500 2150
Wire Wire Line
	6950 2150 9800 2150
Wire Wire Line
	7150 2450 9800 2450
Connection ~ 10500 2450
Wire Wire Line
	6750 2800 6750 2900
Wire Wire Line
	6750 2900 6650 2900
Wire Wire Line
	10100 1650 10100 1850
Wire Wire Line
	10000 1750 10200 1750
Wire Wire Line
	10000 1750 10000 1850
Wire Wire Line
	10200 1750 10200 1850
Connection ~ 10100 1750
Wire Wire Line
	10100 2750 10200 2750
Wire Wire Line
	10200 2750 10200 2650
Connection ~ 10100 2750
Wire Wire Line
	10400 2250 10600 2250
Wire Wire Line
	10100 2650 10100 5850
Wire Wire Line
	9550 2300 9550 2850
Wire Wire Line
	9550 2850 10500 2850
Wire Wire Line
	10500 2850 10500 2050
Wire Wire Line
	7050 2300 9550 2300
Wire Wire Line
	6950 2150 6950 3200
Wire Wire Line
	6950 3200 6650 3200
Wire Wire Line
	6650 3300 7050 3300
Wire Wire Line
	7050 3300 7050 2300
Wire Wire Line
	6650 3400 7150 3400
Wire Wire Line
	7150 3400 7150 2450
Wire Wire Line
	8150 4050 8250 4050
Wire Wire Line
	8250 4450 8150 4450
Wire Wire Line
	8150 4350 8250 4350
Connection ~ 8250 4350
Connection ~ 8250 4250
Wire Wire Line
	8150 4150 8250 4150
Connection ~ 8250 4150
Connection ~ 8250 4450
Wire Wire Line
	7850 3650 7850 3850
Wire Wire Line
	7750 3750 7950 3750
Wire Wire Line
	7750 3750 7750 3850
Wire Wire Line
	7950 3750 7950 3850
Connection ~ 7850 3750
Wire Wire Line
	7850 4750 7950 4750
Wire Wire Line
	7950 4750 7950 4650
Wire Wire Line
	8150 4250 8350 4250
Wire Wire Line
	7300 4300 7300 4850
Wire Wire Line
	7300 4850 8250 4850
Wire Wire Line
	8250 4850 8250 4050
Wire Wire Line
	6650 4300 7300 4300
Wire Wire Line
	6650 4200 7200 4200
Wire Wire Line
	7200 4200 7200 4150
Wire Wire Line
	7200 4150 7550 4150
Wire Wire Line
	7550 4450 7200 4450
Wire Wire Line
	7200 4450 7200 4400
Wire Wire Line
	7200 4400 6650 4400
Wire Wire Line
	9300 3100 9400 3100
Wire Wire Line
	9400 3500 9300 3500
Wire Wire Line
	9300 3400 9400 3400
Connection ~ 9400 3400
Connection ~ 9400 3300
Wire Wire Line
	9300 3200 9400 3200
Connection ~ 9400 3200
Connection ~ 9400 3500
Wire Wire Line
	9000 2700 9000 2900
Wire Wire Line
	8900 2800 9100 2800
Wire Wire Line
	8900 2800 8900 2900
Wire Wire Line
	9100 2800 9100 2900
Connection ~ 9000 2800
Wire Wire Line
	9000 3800 9100 3800
Wire Wire Line
	9100 3800 9100 3700
Connection ~ 9000 3800
Wire Wire Line
	9300 3300 9500 3300
Wire Wire Line
	9000 3700 9000 5450
Wire Wire Line
	8450 3350 8450 3900
Wire Wire Line
	8450 3900 9400 3900
Wire Wire Line
	9400 3900 9400 3100
Wire Wire Line
	7500 3350 8450 3350
Wire Wire Line
	7400 3250 8350 3250
Wire Wire Line
	8350 3250 8350 3200
Wire Wire Line
	8350 3200 8700 3200
Wire Wire Line
	8700 3500 8350 3500
Wire Wire Line
	8350 3500 8350 3450
Wire Wire Line
	8350 3450 7600 3450
Wire Wire Line
	7600 3450 7600 3900
Wire Wire Line
	7600 3900 6650 3900
Wire Wire Line
	6650 3800 7500 3800
Wire Wire Line
	7500 3800 7500 3350
Wire Wire Line
	7400 3250 7400 3700
Wire Wire Line
	7400 3700 6650 3700
Wire Wire Line
	6750 4700 6650 4700
$Comp
L GND #PWR024
U 1 1 5A507920
P 10100 6350
F 0 "#PWR024" H 10100 6100 50  0001 C CNN
F 1 "GND" H 10100 6200 50  0000 C CNN
F 2 "" H 10100 6350 50  0001 C CNN
F 3 "" H 10100 6350 50  0001 C CNN
	1    10100 6350
	1    0    0    -1  
$EndComp
Wire Wire Line
	10100 6350 10100 6150
Wire Wire Line
	6650 5500 6750 5500
Wire Wire Line
	6750 5500 6750 6250
Wire Wire Line
	6750 6250 10100 6250
Connection ~ 10100 6250
Wire Wire Line
	6650 5300 6950 5300
Wire Wire Line
	6950 5300 6950 5850
Wire Wire Line
	6950 5850 9000 5850
Connection ~ 9000 5850
Wire Wire Line
	6650 5200 7050 5200
Wire Wire Line
	7050 5200 7050 5750
Connection ~ 9000 5350
Wire Wire Line
	7050 5750 8850 5750
Wire Wire Line
	8850 5750 8850 5350
Wire Wire Line
	8850 5350 9000 5350
Wire Wire Line
	10100 5750 9950 5750
Wire Wire Line
	9950 5750 9950 6150
Wire Wire Line
	9950 6150 6850 6150
Wire Wire Line
	6850 6150 6850 5400
Wire Wire Line
	6850 5400 6650 5400
Connection ~ 10100 5750
Connection ~ 10100 5100
Wire Wire Line
	9000 5750 9000 5950
Wire Wire Line
	9000 5950 9650 5950
Wire Wire Line
	9650 5950 9650 5450
Wire Wire Line
	9650 5450 10100 5450
Connection ~ 10100 5450
$Comp
L +3V3 #PWR025
U 1 1 5A521C1B
P 4350 5100
F 0 "#PWR025" H 4350 4950 50  0001 C CNN
F 1 "+3V3" H 4350 5240 50  0000 C CNN
F 2 "" H 4350 5100 50  0001 C CNN
F 3 "" H 4350 5100 50  0001 C CNN
	1    4350 5100
	0    -1   -1   0   
$EndComp
Wire Wire Line
	7850 4650 7850 5100
Connection ~ 7850 4750
Text HLabel 4850 5200 0    60   Output ~ 0
SenseW
$Comp
L R R301
U 1 1 5A534BFF
P 7850 5250
F 0 "R301" V 7930 5250 50  0000 C CNN
F 1 "5m" V 7850 5250 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 7780 5250 50  0001 C CNN
F 3 "" H 7850 5250 50  0001 C CNN
	1    7850 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	7850 5400 7850 5600
Wire Wire Line
	7850 5600 8200 5600
Wire Wire Line
	8200 5600 8200 5100
Wire Wire Line
	8200 5100 10100 5100
Wire Wire Line
	6650 5000 7850 5000
Connection ~ 7850 5000
Wire Wire Line
	6650 5100 7700 5100
Wire Wire Line
	7700 5100 7700 5500
Wire Wire Line
	7700 5500 7850 5500
Connection ~ 7850 5500
Wire Wire Line
	5050 5200 4850 5200
Wire Wire Line
	3850 3400 5050 3400
Text Label 3850 3400 0    60   ~ 0
3V3_DRV
Connection ~ 4100 3400
$EndSCHEMATC
